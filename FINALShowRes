void showreservation()
{
	system("cls");
	int showcnt = 0;
	int eventcnt = 0;
	bool checkshows = false;
	char confirm;
	bool alreadyreserved = false;
	for (int j = 0; !showdata[j].name.empty(); j++)
	{
		showcnt++;
	}
	for (int h = 0; !eventdata[h].name.empty(); h++)
	{
		eventcnt++;
	}
	cout << "Select the show you want to reserve : " << endl;
	int index = 1;
	for (int i = 0; i < showcnt; i++)
	{
		if (showdata[i].showseats <= 100)
		{
			cout << index << '.';
			cout << showdata[i].name << endl;
			index++;
		}
	}
	int choice;
	cin >> choice;
	int tobereserveddate = showdata[choice - 1].startdate.day + (showdata[choice - 1].startdate.month * 30);
	int each_eventstdate, each_eventenddate, each_showstdate, each_showenddate;
	if (cin.fail())
	{
		cout << "Error!Retry." << endl;
		cin.clear();
		cin.ignore();
		showreservation();
	}
	else
	{
		if (choice <= index && choice > 0)
		{
			for (int h = 0; h < showcnt; h++)
			{
				if (user.showid[h] == showdata[choice - 1].id)
				{
					cout << "Already reserved." << endl;
					checkshows = true;
					alreadyreserved = true;
					break;
				}
			}
			if (alreadyreserved == false)
			{
				for (int a = 0; a < showcnt; a++)
				{
					for (int b = 0; b < showcnt; b++)
					{
						if (user.showid[a] == showdata[b].id)
						{
							if (showdata[b].startdate.day == showdata[choice - 1].startdate.day && showdata[b].startdate.month == showdata[choice - 1].startdate.month && showdata[b].startdate.year == showdata[choice - 1].startdate.year)
							{
								if (showdata[b].time == showdata[choice - 1].time)
								{
									cout << "You have a reserved show at the same time slot." << endl;
									cout << "Do you want to confirm (y/n)?" << endl;
									cin >> confirm;
									if (confirm == 'y')
									{
										checkshows = false;
										break;
									}
									else
									{
										showreservation();
										break;
									}
								}
							}
							else if (showdata[b].startdate.day != showdata[choice - 1].startdate.day && showdata[b].startdate.month == showdata[choice - 1].startdate.month && showdata[b].startdate.year == showdata[choice - 1].startdate.year)
							{
								each_showstdate = showdata[b].startdate.day + (showdata[b].startdate.month * 30);
								each_showenddate = showdata[b].enddate.day + (showdata[b].enddate.month * 30);
								if (tobereserveddate >= each_showstdate && tobereserveddate <= each_showenddate)
								{
									if (showdata[b].time == showdata[choice - 1].time)
									{
										cout << "You have a reserved show at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}

							}
							else if (showdata[b].startdate.month != showdata[choice - 1].startdate.month && showdata[b].startdate.year == showdata[choice - 1].startdate.year)
							{
								each_showstdate = showdata[b].startdate.day + (showdata[b].startdate.month * 30);
								each_showenddate = showdata[b].enddate.day + (showdata[b].enddate.month * 30);
								if (tobereserveddate >= each_showstdate && tobereserveddate <= each_showenddate)
								{
									if (showdata[b].time == showdata[choice - 1].time)
									{
										cout << "You have a reserved show at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}
							}
							else if (showdata[b].startdate.year != showdata[choice - 1].startdate.year)
							{
								tobereserveddate = showdata[choice - 1].startdate.day + (showdata[choice - 1].startdate.month * 30) + (showdata[choice - 1].startdate.year * 365);
								each_showstdate = showdata[b].startdate.day + (showdata[b].startdate.month * 30) + (showdata[b].startdate.year * 365);
								each_showenddate = showdata[b].enddate.day + (showdata[b].enddate.month * 30) + (showdata[b].enddate.year * 365);
								if (tobereserveddate >= each_showstdate && tobereserveddate <= each_showenddate)
								{
									if (showdata[b].time == showdata[choice - 1].time)
									{
										cout << "You have a reserved show at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}
							}
						}
					}
				}
				for (int j = 0; j < eventcnt; j++)
				{
					for (int k = 0; k < eventcnt; k++)
					{
						if (user.eventid[j] == eventdata[k].id)
						{
							if (eventdata[k].startdate.day == showdata[choice - 1].startdate.day && eventdata[k].startdate.month == showdata[choice - 1].startdate.month && eventdata[k].startdate.year == showdata[choice - 1].startdate.year)
							{
								if (eventdata[k].time == showdata[choice - 1].time)
								{
									cout << "You have a reserved event at the same time slot." << endl;
									cout << "Do you want to confirm (y/n)?" << endl;
									cin >> confirm;
									if (confirm == 'y')
									{
										checkshows = false;
										break;
									}
									else
									{
										showreservation();
										break;
									}
								}
							}
							else if (eventdata[k].startdate.day != showdata[choice - 1].startdate.day && eventdata[k].startdate.month == showdata[choice - 1].startdate.month && eventdata[k].startdate.year == showdata[choice - 1].startdate.year)
							{
								each_eventstdate = eventdata[k].startdate.day + (eventdata[k].startdate.month * 30);
								each_eventenddate = eventdata[k].enddate.day + (eventdata[k].enddate.month * 30);
								if (tobereserveddate >= each_eventstdate && tobereserveddate <= each_eventenddate)
								{
									if (eventdata[k].time == eventdata[choice - 1].time)
									{
										cout << "You have a reserved event at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}

							}
							else if (eventdata[k].startdate.month != showdata[choice - 1].startdate.month && eventdata[k].startdate.year == showdata[choice - 1].startdate.year)
							{
								each_eventstdate = eventdata[k].startdate.day + (eventdata[k].startdate.month * 30);
								each_eventenddate = eventdata[k].enddate.day + (eventdata[k].enddate.month * 30);
								if (tobereserveddate >= each_eventstdate && tobereserveddate <= each_eventenddate)
								{
									if (eventdata[k].time == showdata[choice - 1].time)
									{
										cout << "You have a reserved event at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}
							}
							else if (eventdata[k].startdate.year != showdata[choice - 1].startdate.year)
							{
								tobereserveddate = showdata[choice - 1].startdate.day + (showdata[choice - 1].startdate.month * 30) + (showdata[choice - 1].startdate.year * 365);
								each_eventstdate = eventdata[k].startdate.day + (eventdata[k].startdate.month * 30) + (eventdata[k].startdate.year * 365);
								each_eventenddate = eventdata[k].enddate.day + (eventdata[k].enddate.month * 30) + (eventdata[k].enddate.year * 365);
								if (tobereserveddate >= each_eventstdate && tobereserveddate <= each_eventenddate)
								{
									if (eventdata[k].time == showdata[choice - 1].time)
									{
										cout << "You have a reserved event at the same time slot." << endl;
										cout << "Do you want to confirm (y/n)?" << endl;
										cin >> confirm;
										if (confirm == 'y')
										{
											checkshows = false;
											break;
										}
										else
										{
											showreservation();
											break;
										}
									}
								}
							}
						}
					}
				}
			}

		}

	}
	if (checkshows == false)
	{
			user.showid[showcnt - 1] = showdata[choice - 1].id;
			cout << "Reservation done successfully!" << endl;

	}
	else
	{
			cout << "Error!Retry." << endl;
			showreservation();
	}
	system("pause");
}
